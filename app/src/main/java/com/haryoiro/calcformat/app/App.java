/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package com.haryoiro.calcformat.app;

import com.haryoiro.calcformat.config.FormatOption;
import com.haryoiro.calcformat.formatting.CalcFormatter;
import com.haryoiro.calcformat.cli.CmdAttributes;
import com.haryoiro.calcformat.cli.CmdOptions;
import static com.haryoiro.calcformat.utils.IoUtils.pathToFile;
import static java.lang.System.exit;

public class App {

    static FormatOption formatOption = new FormatOption();

    public static void main(String[] args) {

        CmdAttributes opt = CmdOptions.parseArgs(args);
        if (opt == null) {
            CmdOptions.printHelp();
            exit(0);
        }


        if (opt.isFix()) {
            System.out.println("fix");
        }
        if (opt.isCheck()) {
            System.out.println("check");
        }
        if (opt.getOptionFile() != null) {
            formatOption = formatOption.fromPath(opt.getOptionFile());
        }

        // 指定されたすべてのファイルに対してフォーマットをかける
        if (opt.getInputFiles() != null) {
            for (String file : opt.getInputFiles()) {
                System.out.println(CalcFormatter.format(pathToFile(file), formatOption));
            }
        }

    }

}
